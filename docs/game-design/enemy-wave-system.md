# 적 & 웨이브 시스템

> [← 기획 총괄로 돌아가기](./overview.md)

---

## 개요

적은 Bone-To-Peak에서 **위협이자 자원**이다. 처치된 적은 [Corpse](./corpse-economy.md)를 드롭하여 [미니언 소환](./minion-system.md)의 연료가 된다. 웨이브 시스템은 시간이 지남에 따라 난이도를 증가시키며, 플레이어가 군단 규모를 키우도록 압박한다.

---

## 적 유형

### 일반 적

| 유형                  | HP  | 공격력 | 이동속도 | 공격범위  | Corpse 드롭 | 특징               |
| --------------------- | --- | ------ | -------- | --------- | ----------- | ------------------ |
| 스웜 (Swarm)          | 15  | 5      | 5.0      | 근접      | 1           | 약하지만 대량 출현 |
| 할버디어 (Halberdier) | 40  | 12     | 3.5      | 근접 (긴) | 1           | 긴 근접 사거리     |
| 궁수 (Archer)         | 25  | 8      | 3.0      | 원거리    | 1           | 후방에서 사격      |
| 방패병 (Shielder)     | 80  | 6      | 2.5      | 근접      | 2           | 전면 피해 50% 감소 |

### 엘리트 적

웨이브 5 이후부터 일반 적과 함께 소수 출현한다.

| 유형              | HP  | 공격력 | 이동속도 | Corpse 드롭 | 특수 능력                        |
| ----------------- | --- | ------ | -------- | ----------- | -------------------------------- |
| 기사 (Knight)     | 150 | 20     | 4.0      | 3           | 돌진 공격 (3초마다, 직선 돌진)   |
| 마법사 (Mage)     | 80  | 30     | 3.0      | 3           | 범위 마법 (2초마다, 반경 2 유닛) |
| 암살자 (Assassin) | 60  | 35     | 6.0      | 3           | 은신 후 네크로맨서 직접 공격     |

#### 기사 돌진 상세

| 항목        | 값                                        |
| ----------- | ----------------------------------------- |
| 돌진 쿨타임 | 3초                                       |
| 돌진 속도   | 이동속도 ×3 (12.0)                        |
| 돌진 지속   | 0.5초                                     |
| 돌진 방향   | 발동 시 네크로맨서 방향으로 고정 (추적 X) |
| 돌진 피해   | 공격력 ×1.5 (30)                          |
| 돌진 넉백   | 미니언에게 2.0 유닛 넉백                  |
| 충돌 판정   | 돌진 경로 위 모든 유닛에 피해 (관통)      |
| 예고 연출   | 돌진 0.5초 전 발이 빛나는 예고 이펙트     |

#### 마법사 범위 마법 상세

| 항목        | 값                                                                  |
| ----------- | ------------------------------------------------------------------- |
| 시전 쿨타임 | 2초                                                                 |
| 마법 범위   | 반경 2.0 유닛 원형                                                  |
| 마법 위치   | 네크로맨서 현재 위치 (시전 시점 기준)                               |
| 착탄 딜레이 | 시전 후 1.0초 뒤 폭발                                               |
| 예고 연출   | 바닥에 붉은색 원형 경고 표시 (1초간)                                |
| 지속 피해   | 없음 (1회 즉발 피해)                                                |
| 피해 대상   | 폭발 범위 내 모든 유닛 (아군 적도 포함하지 않음, 플레이어/미니언만) |

#### 암살자 은신 상세

| 항목             | 값                                           |
| ---------------- | -------------------------------------------- |
| 은신 발동 조건   | 네크로맨서와 12 유닛 이내 접근 시            |
| 은신 지속        | 3초 (또는 공격 시 즉시 해제)                 |
| 은신 중 투명도   | 20% (반투명, 주의 깊게 보면 보임)            |
| 은신 중 이동속도 | ×1.5 (9.0)                                   |
| 은신 쿨타임      | 8초 (해제 후부터)                            |
| 은신 해제 공격   | 공격력 ×2 (70) — 기습 보너스                 |
| 은신 중 피격     | 미니언/Explode로 피격 시 은신 즉시 해제      |
| 우회 AI          | 미니언 군단 외곽을 돌아 네크로맨서 후방 접근 |

### 보스

5웨이브마다 등장하는 강력한 적이다.

| 보스                | 등장 웨이브 | HP   | 페이즈 | Corpse 드롭 |
| ------------------- | ----------- | ---- | ------ | ----------- |
| 성기사 (Paladin)    | 5           | 500  | 2      | 10          |
| 드래곤 (Dragon)     | 10          | 1200 | 3      | 10          |
| 대마법사 (Archmage) | 15          | 800  | 3      | 10          |
| 용사 (Hero)         | 20          | 2000 | 4      | 10          |

---

## 웨이브 구조

### 시간 기반 진행

| 웨이브 | 시작 시간 | 지속 시간 | 특징                           |
| ------ | --------- | --------- | ------------------------------ |
| 1      | 0:00      | 60초      | 스웜만 등장, 튜토리얼          |
| 2      | 1:00      | 60초      | 할버디어 추가                  |
| 3      | 2:00      | 60초      | 궁수 추가                      |
| 4      | 3:00      | 60초      | 방패병 추가, 혼합 구성         |
| 5      | 4:00      | 90초      | **보스 등장** + 엘리트 시작    |
| 6~9    | —         | 60초      | 적 수량 및 스탯 증가           |
| 10     | 9:00      | 120초     | **2번째 보스** + 대규모 웨이브 |
| 11~19  | —         | 60초      | 엘리트 비율 증가               |
| 20     | 19:00     | 180초     | **최종 보스** + 종말 웨이브    |

### 웨이브 간 휴식

- 각 웨이브 종료 후 **10초간 휴식** (적 스폰 없음)
- 휴식 시간 동안 Corpse 수집, 합성, 포메이션 전환 가능
- 보스 웨이브 종료 후 **15초간 휴식**

---

## 스폰 패턴

### 스폰 위치

- 화면 밖 가장자리에서 스폰 (카메라 영역 밖 1~2 유닛)
- 네크로맨서 기준 **전방위 360도**에서 출현
- 보스는 화면 상단에서 등장 (연출)

### 스폰 규칙

```
웨이브 시작
    │
    ▼
스폰 간격 타이머 (웨이브별 상이)
    │
    ▼
스폰 위치 결정 (랜덤 방향, 화면 밖)
    │
    ▼
적 유형 결정 (웨이브 스폰 테이블)
    │
    ├─ 70%: 일반 적 (종류는 웨이브별 테이블)
    ├─ 20%: 일반 적 소규모 무리 (5~8마리)
    └─ 10%: 엘리트 적 (웨이브 5 이후)
```

### 스폰 간격 (초)

| 웨이브 | 스폰 간격 | 웨이브당 총 적 수 (근사) |
| ------ | --------- | ------------------------ |
| 1      | 2.0       | 30                       |
| 5      | 1.5       | 60 + 보스                |
| 10     | 1.0       | 120 + 보스               |
| 15     | 0.7       | 180 + 보스               |
| 20     | 0.5       | 360 + 보스               |

---

## 난이도 곡선

### 스탯 스케일링

웨이브가 진행될수록 적의 기본 스탯에 배율이 적용된다.

| 웨이브 | HP 배율 | 공격력 배율 | 이동속도 배율 |
| ------ | ------- | ----------- | ------------- |
| 1~4    | ×1.0    | ×1.0        | ×1.0          |
| 5~9    | ×1.3    | ×1.2        | ×1.05         |
| 10~14  | ×1.8    | ×1.5        | ×1.1          |
| 15~19  | ×2.5    | ×2.0        | ×1.15         |
| 20     | ×4.0    | ×3.0        | ×1.2          |

### 설계 의도

- 초반(1~4): 시스템 학습 구간, 적은 약하고 소환을 연습
- 중반(5~10): 군단 운영 본격화, 포메이션과 합성이 중요해짐
- 후반(11~19): 대규모 군단 vs 대규모 웨이브, 자원 관리 압박 극대화
- 최종(20): 모든 시스템을 총동원하는 클라이맥스

---

## 보스 메카닉

### 공통 규칙

- 보스는 화면 상단에서 등장하며, 체력바가 화면 상단에 표시
- 보스 등장 중에도 일반 적이 함께 스폰됨
- 보스 처치 시 Corpse 10개 + 특수 보상 드롭
- 보스는 넉백 면역

### 보스 등장 연출

| 항목                  | 값                                    |
| --------------------- | ------------------------------------- |
| 등장 위치             | 카메라 상단 밖 3 유닛                 |
| 등장 이동             | 카메라 영역 안으로 2초간 서서히 이동  |
| 등장 중 무적          | 등장 이동 완료까지 무적 (데미지 0)    |
| 카메라 연출           | 줌아웃 (×0.85), 등장 완료 후 유지     |
| 일반 적 스폰 일시정지 | 등장 시작 ~ 등장 완료 후 3초 (총 5초) |
| 보스 이름 표시        | 화면 중앙에 보스 이름 1.5초간 팝업    |

### 페이즈 전환 공통

- 페이즈 전환 시 **0.5초간 모든 행동 정지** (전환 연출)
- 전환 중 보스는 피해를 받지만 사망하지 않음 (최소 HP 1 유지, 전환 완료 후 정상 처리)
- 전환 시 시각 이펙트: 보스 주변 충격파 + 체력바 색상 변화
- 각 페이즈의 패턴은 **독립 쿨타임**으로 관리 (패턴 A 쿨 중 패턴 B 발동 가능)

### 성기사 (Paladin) — 웨이브 5

| 페이즈 | HP 구간  | 패턴                                                                    |
| ------ | -------- | ----------------------------------------------------------------------- |
| 1      | 100~50%  | 직선 돌진 → 대검 휘두르기 (전방 180도)                                  |
| 2      | 50% 이하 | 신성 보호막 발동 (5초간 피해 50% 감소) + 빛기둥 낙하 (3곳, 2초 후 폭발) |

#### 성기사 패턴 상세

| 패턴          | 쿨타임               | 상세                                                                            |
| ------------- | -------------------- | ------------------------------------------------------------------------------- |
| 직선 돌진     | 4초                  | 네크로맨서 방향으로 속도 ×3(15.0), 0.8초간 돌진. 경로 상 미니언에 피해          |
| 대검 휘두르기 | 돌진 종료 후 즉시    | 전방 180도, 반경 2.5 유닛, 피해 = 공격력 ×1.5                                   |
| 신성 보호막   | 페이즈 2 진입 시 1회 | 5초간 받는 피해 50% 감소. 금색 발광 이펙트                                      |
| 빛기둥 낙하   | 6초                  | 네크로맨서 위치 + 좌우 2 유닛 (총 3곳). 2초 예고 후 반경 1.5 유닛 폭발, 피해 40 |

### 드래곤 (Dragon) — 웨이브 10

| 페이즈 | HP 구간  | 패턴                                          |
| ------ | -------- | --------------------------------------------- |
| 1      | 100~70%  | 비행 상태에서 화염 브레스 (직선)              |
| 2      | 70~30%   | 착지 + 꼬리 휘두르기 (360도) + 화염 장판      |
| 3      | 30% 이하 | 연속 비행/착지 전환 + 화염비 (랜덤 위치 다수) |

#### 드래곤 패턴 상세

| 패턴                | 쿨타임 | 상세                                                                           |
| ------------------- | ------ | ------------------------------------------------------------------------------ |
| 화염 브레스 (P1)    | 5초    | 네크로맨서 방향 직선, 폭 1.5 유닛, 길이 10 유닛, 1.0초 지속, 피해 30/틱(0.3초) |
| 꼬리 휘두르기 (P2)  | 4초    | 360도, 반경 3.0 유닛, 피해 = 공격력 ×2, 넉백 3.0 유닛                          |
| 화염 장판 (P2)      | 8초    | 네크로맨서 위치에 반경 2.0 유닛 장판, 5초간 유지, 초당 10 피해                 |
| 화염비 (P3)         | 6초    | 랜덤 위치 6~8곳, 각 반경 1.5 유닛, 1.5초 예고 후 폭발, 피해 35                 |
| 비행/착지 전환 (P3) | 10초   | 비행 3초(이동속도 ×2) → 착지 7초, 착지 시 착지 충격 (반경 2.0, 피해 20)        |

> 비행 상태에서는 근접 미니언의 공격이 닿지 않음 (원거리만 유효)

### 대마법사 (Archmage) — 웨이브 15

| 페이즈 | HP 구간  | 패턴                                               |
| ------ | -------- | -------------------------------------------------- |
| 1      | 100~70%  | 추적형 마법탄 3발 동시 발사                        |
| 2      | 70~30%   | 텔레포트 + 광역 폭발 (텔레포트 도착 지점)          |
| 3      | 30% 이하 | 미니 적 4마리 소환 + 보호막 (미니 적 처치 시 해제) |

#### 대마법사 패턴 상세

| 패턴               | 쿨타임                | 상세                                                                                 |
| ------------------ | --------------------- | ------------------------------------------------------------------------------------ |
| 추적형 마법탄 (P1) | 3초                   | 3발 동시 발사, 속도 5 유닛/초, 약한 호밍(회전 속도 90도/초), 8초 후 소멸, 피해 20/발 |
| 텔레포트 (P2)      | 5초                   | 현재 위치에서 소멸 → 8~12 유닛 거리 랜덤 위치에 재출현, 0.3초 전환 시간              |
| 텔레포트 폭발 (P2) | 텔레포트 도착 시 즉시 | 도착 지점 반경 3.0 유닛, 피해 35, 1.0초 예고 (도착 위치 마법진 표시)                 |
| 미니 적 소환 (P3)  | 15초                  | 4마리 (스웜 스탯 ×2), 미니 적이 모두 생존 중이면 재소환 불가                         |
| 보호막 (P3)        | 미니 적 소환과 연동   | 소환 즉시 발동, 보호막 중 받는 피해 0. 미니 적 전멸 시 해제                          |

### 용사 (Hero) — 웨이브 20 (최종 보스)

| 페이즈 | HP 구간  | 패턴                                          |
| ------ | -------- | --------------------------------------------- |
| 1      | 100~75%  | 검기 발사 (부채꼴) + 돌진                     |
| 2      | 75~50%   | 성스러운 오라 (주변 언데드 약화: 공격력 -30%) |
| 3      | 50~25%   | 동료 소환 (파티원 3명, 각각 독립 AI)          |
| 4      | 25% 이하 | 각성 — 전 패턴 강화 + 속도 증가               |

#### 용사 패턴 상세

| 패턴               | 쿨타임               | 상세                                                                            |
| ------------------ | -------------------- | ------------------------------------------------------------------------------- |
| 검기 발사 (P1)     | 3초                  | 전방 120도 부채꼴, 5개 검기 투사체, 속도 12 유닛/초, 사거리 10 유닛, 피해 25/발 |
| 돌진 (P1)          | 5초                  | 성기사와 동일 방식, 속도 ×3, 0.5초, 경로 피해 = 공격력 ×2                       |
| 성스러운 오라 (P2) | 상시 유지            | 반경 6 유닛, 범위 내 미니언 공격력 -30%. 보스 근처 미니언 약화 강제             |
| 동료 소환 (P3)     | 20초                 | 궁수/기사/마법사 각 1명 (엘리트 스탯), 동료 전멸 후 재소환 가능                 |
| 각성 (P4)          | 페이즈 4 진입 시 1회 | 이동속도 ×1.5, 모든 패턴 쿨타임 ×0.5, 피해 ×1.5. 붉은 오라 이펙트               |

---

## 엔드리스 모드 (Endless Mode)

Wave 20을 클리어(최종 보스 처치)한 후, 플레이어는 **런 결과 화면으로 이동**하거나 **엔드리스 모드에 진입**할 수 있다.

### 진입 조건

| 항목      | 값                                                           |
| --------- | ------------------------------------------------------------ |
| 해금 조건 | Wave 20 클리어 (첫 승리 시 자동 해금)                        |
| 진입 방식 | 승리 연출 후 선택: "엔드리스 도전" / "결과 화면으로"         |
| 진입 시점 | Wave 20 보스 처치 직후, 15초 휴식 후 Wave 21 시작            |
| 이탈      | ESC → 일시정지 메뉴 → "엔드리스 종료" (현재까지의 기록 저장) |

### 엔드리스 웨이브 구조

| 웨이브 | 구성                                                             |
| ------ | ---------------------------------------------------------------- |
| 21~24  | 대규모 혼합 + 엘리트 비율 30%                                    |
| 25     | **미니보스**: 기존 보스 2종 동시 등장 (약화 없음, 스케일링 적용) |
| 26~29  | 적 스탯 스케일링 계속 증가                                       |
| 30     | **미니보스**: 기존 보스 3종 동시 등장                            |
| 31+    | 5웨이브마다 미니보스, 스케일링 무한 증가                         |

### 엔드리스 스탯 스케일링

Wave 20 이후의 스케일링은 선형이 아닌 **지수적 증가**를 따른다.

```
엔드리스 배율 = Wave 20 배율 × 1.15^(현재 웨이브 - 20)

예시:
  Wave 21: HP ×4.0 × 1.15 = ×4.6
  Wave 25: HP ×4.0 × 1.15^5 = ×8.0
  Wave 30: HP ×4.0 × 1.15^10 = ×16.2
  Wave 40: HP ×4.0 × 1.15^20 = ×65.5
```

### 엔드리스 보상

| 항목         | 값                                        |
| ------------ | ----------------------------------------- |
| 네크로 코인  | 기본 공식 계속 적용 (생존 시간 + 처치 수) |
| 추가 보너스  | Wave 25 돌파마다 네크로 코인 +50          |
| 리더보드     | 최고 도달 웨이브 기록 (로컬)              |
| 런 결과 표시 | "Wave 35 도달 (엔드리스)" 형태로 표시     |

### 엔드리스 특수 규칙

- 엔드리스에서는 **Corpse 수용량이 점진적 증가**: 5웨이브마다 +2 (무한)
- 엔드리스에서는 **레벨업이 계속 진행** (레벨 상한 20 → 무제한, 필요 XP 계속 증가)
- 엔드리스 기록은 Ascension 레벨별로 분리 저장
- 사망 시 기본 런 결과 + 엔드리스 추가 정보 표시

---

## 미니보스 (Mini-Boss)

엔드리스 모드 외에도, 본편(Wave 1~20)에서 **미니보스**가 등장한다.

### 미니보스 규칙

| 항목        | 값                                                |
| ----------- | ------------------------------------------------- |
| 등장 조건   | Wave 3, 7, 12, 17 (비-보스 웨이브 중 일부)        |
| 구성        | 엘리트 적 2마리가 동시 등장 (같은 유형 또는 혼합) |
| 스탯        | 해당 웨이브의 엘리트 스탯 × 1.3                   |
| HP 바       | 머리 위 표시 (보스와 달리 상단 바 없음)           |
| Corpse 드롭 | 엘리트 드롭 ×2 (6개)                              |
| 등장 연출   | 화면 가장자리 빛남 + 경고음 (보스급 연출 없음)    |

### 미니보스 등장 웨이브 변형 (Ascension 3+)

Ascension 3 이상에서는 미니보스 등장 빈도가 증가한다.

| Ascension | 미니보스 등장 웨이브              |
| --------- | --------------------------------- |
| 0~2       | 3, 7, 12, 17                      |
| 3~4       | 2, 4, 7, 9, 12, 14, 17, 19        |
| 5+        | 매 홀수 웨이브 (보스 웨이브 제외) |

---

## 적 시각 변형 (Variant)

같은 유형의 적이라도 웨이브가 진행되면 **시각적 변형**이 적용되어 시각적 단조로움을 방지한다.

| 웨이브 구간 | 변형   | 설명                                    |
| ----------- | ------ | --------------------------------------- |
| 1~4         | 기본   | 원본 스프라이트                         |
| 5~9         | 강화형 | 약간 붉은 색조 + 스프라이트 5% 확대     |
| 10~14       | 정예형 | 짙은 붉은 색조 + 눈 발광 이펙트         |
| 15~19       | 광화형 | 보라색 색조 + 체력바 옆 해골 아이콘     |
| 20+         | 심연형 | 검은 실루엣 + 붉은 외곽선 + 잔상 이펙트 |

> 변형은 순수 **시각적**이다. 스탯 스케일링은 별도 테이블에 따른다.

---

## 적 처치 시 드롭 테이블

| 드롭          | 확률 | 설명                         |
| ------------- | ---- | ---------------------------- |
| Corpse        | 100% | 기본 드롭 (유형별 수량 상이) |
| 경험치 구슬   | 100% | 네크로맨서 레벨업용          |
| 체력 회복     | 5%   | 소량 HP 회복 (15 HP)         |
| Corpse 보너스 | 3%   | 추가 Corpse +2               |
| 임시 버프     | 1%   | 10초간 미니언 공격속도 +20%  |

### 경험치 구슬 상세

| 항목                  | 값                                    |
| --------------------- | ------------------------------------- |
| 기본 경험치 (일반 적) | 3 XP                                  |
| 엘리트 경험치         | 15 XP                                 |
| 보스 경험치           | 50 XP                                 |
| 구슬 바닥 유지 시간   | 10초 (Corpse보다 긴 유지)             |
| 수집 범위             | 2.0 유닛 (기본), 스킬로 확장 가능     |
| 수집 흡입 속도        | 15 유닛/초 (Corpse보다 빠름)          |
| 시각 표현             | 밝은 노란색 구슬, 크기 0.3 × 0.3 유닛 |
| 보스 구슬             | 대형 금색 구슬 (0.6 × 0.6 유닛)       |

- 경험치에는 수용량 상한이 없음 (무한 수집 가능)
- 웨이브별 경험치 스케일링: 웨이브 번호 × 0.2 배율 추가
    - 예: 웨이브 5의 일반 적 = 3 XP × (1 + 5 × 0.2) = 6 XP

### 드롭 아이템 구현 스펙

| 드롭          | Object Pool 사용        | 수집 방식              | 수집 우선순위 |
| ------------- | ----------------------- | ---------------------- | ------------- |
| Corpse        | 예 (기존 CorpseSpawner) | CorpseCollector 트리거 | 1 (최우선)    |
| 경험치 구슬   | 예 (ExpOrbPool)         | ExpCollector 트리거    | 2             |
| 체력 회복     | 예 (DropItemPool)       | 접촉 시 즉시           | 3             |
| Corpse 보너스 | Corpse와 동일           | CorpseCollector 트리거 | 1             |
| 임시 버프     | 예 (DropItemPool)       | 접촉 시 즉시           | 3             |

> **수집 우선순위**: Corpse와 경험치 구슬이 같은 위치에 있을 때 수집 순서를 결정한다. CorpseCollector와 ExpCollector는 독립 트리거이므로 **동시에 수집**된다 (우선순위 충돌 없음). 체력 회복/버프는 별도 collider로 접촉 즉시 적용.

### 드롭 아이템 시각 구분

| 드롭          | 색상             | 크기      | 바닥 유지 |
| ------------- | ---------------- | --------- | --------- |
| Corpse        | 녹색             | 0.5 × 0.5 | 5초       |
| 경험치 구슬   | 노란색           | 0.3 × 0.3 | 10초      |
| 체력 회복     | 빨간색 십자가    | 0.4 × 0.4 | 8초       |
| Corpse 보너스 | 밝은 녹색 (발광) | 0.5 × 0.5 | 5초       |
| 임시 버프     | 하늘색           | 0.4 × 0.4 | 8초       |

---

## 적 AI 행동

### 기본 이동 AI

모든 적은 네크로맨서를 향해 이동한다. 이동 방식은 적 유형에 따라 다르다.

| 적 유형         | 이동 방식      | 설명                                                 |
| --------------- | -------------- | ---------------------------------------------------- |
| 스웜            | 직선 추적      | 최단 거리로 돌진, 장애물 회피 최소                   |
| 할버디어        | 직선 추적      | 스웜과 동일하지만 느림                               |
| 궁수            | 유지 거리 추적 | 네크로맨서와 5~7 유닛 거리 유지, 사거리 확보 후 정지 |
| 방패병          | 직선 추적      | 전면 방패를 네크로맨서 방향으로 유지하며 접근        |
| 기사 (엘리트)   | 돌진 추적      | 직선 이동 중 3초마다 돌진 (속도 ×3, 0.5초간)         |
| 마법사 (엘리트) | 유지 거리 추적 | 6~8 유닛 거리 유지, 범위 마법 시전                   |
| 암살자 (엘리트) | 우회 추적      | 미니언 군단을 우회하여 네크로맨서 직접 접근          |

### 장애물 우회

```
적의 장애물 처리:

1. 전방 장애물 감지 (레이캐스트 2.0 유닛)
   └── 좌/우 중 네크로맨서에 가까운 방향으로 우회
   └── 우회 중에도 네크로맨서 방향 벡터 유지

2. 스웜/할버디어: 단순 Steering 기반 회피
   └── 장애물 모서리를 감지하면 가장 가까운 모서리로 이동
   └── 회피 가중치 낮음 (밀집 시 장애물에 걸릴 수 있음)

3. 궁수/마법사: 시야선(LoS) 확보 우선
   └── 장애물 뒤에 네크로맨서가 있으면 시야가 확보되는 위치로 이동
   └── 시야 미확보 시 이동 지속 (정지하지 않음)

4. 암살자: 고급 패스파인딩
   └── A* 기반 경로 탐색 (0.5초 간격 재계산)
   └── 미니언 군단 밀집 영역 회피 가중치 적용
```

### 적 타겟팅 규칙

| 적 유형      | 타겟              | 설명                                          |
| ------------ | ----------------- | --------------------------------------------- |
| 일반 적 전체 | 네크로맨서        | 네크로맨서를 향해 이동, 경로의 미니언을 공격  |
| 암살자       | 네크로맨서 (직접) | 미니언을 무시하고 우회 접근                   |
| 보스         | 네크로맨서        | 네크로맨서 방향 공격, 경로의 모든 유닛에 피해 |

- 적은 미니언을 **의도적으로 타겟팅하지 않음** (네크로맨서만 추적)
- 미니언은 적의 경로를 물리적으로 차단하는 "벽" 역할
- 적이 미니언에 접촉하면 서로 피해를 주고받음 (접촉 피해 간격 0.5초)

---

## 엘리트 적 추가 규칙

### 엘리트 스케일링

엘리트 적은 일반 적과 다른 스케일링 배율을 적용받는다.

| 웨이브 | 엘리트 HP 배율 | 엘리트 공격력 배율 | 스폰 확률 |
| ------ | -------------- | ------------------ | --------- |
| 5~9    | ×1.5           | ×1.3               | 10%       |
| 10~14  | ×2.0           | ×1.7               | 15%       |
| 15~19  | ×2.8           | ×2.2               | 20%       |
| 20     | ×4.0           | ×3.0               | 25%       |

> 엘리트 스케일링은 일반 적 스케일링과 **중첩 적용**된다. 예: 웨이브 15 기사 = 기본 HP 150 × 일반 배율 2.5 × 엘리트 배율 2.8 = HP 1,050.

### 엘리트 시각적 구분

- 엘리트 적은 **붉은색 외곽선 발광** 효과
- 이름 위에 해골 아이콘 표시
- 일반 적보다 스프라이트 크기 10% 확대

---

## 보스 추가 규칙

### 보스 면역 & 저항

| 효과                                | 보스 적용         |
| ----------------------------------- | ----------------- |
| 넉백                                | 면역              |
| [Explode](./corpse-economy.md) 피해 | 70%만 적용        |
| 이동속도 감소 (슬로우)              | 50%만 적용 (반감) |
| 지속 피해 (오라 등)                 | 100% 적용         |
| 즉사 효과                           | 면역              |

### 보스 스폰 중 일반 적 규칙

- 보스가 등장해도 일반 적 스폰은 **계속 진행**
- 단, 보스 등장 직후 5초간 일반 적 스폰 일시정지 (보스 등장 연출)
- 보스가 활동 중일 때 일반 적 스폰 간격 ×1.5 (약간 완화)

### 보스 장애물 상호작용

- 보스는 장애물과 **충돌하지 않음** (통과 이동)
- 보스가 접촉한 중형 장애물은 **즉시 파괴** (Corpse 1개 드롭)
- 대형 장애물은 보스도 파괴 불가 (지형적 유리 포인트)

### Ascension 5 — 보스 동시 출현

Ascension 5에서는 특정 웨이브에서 이전 보스가 함께 등장한다.

| 웨이브 | 등장 보스                              | 특수 규칙                     |
| ------ | -------------------------------------- | ----------------------------- |
| 5      | 성기사                                 | 기존과 동일                   |
| 10     | 드래곤 + 성기사 (약화)                 | 성기사 HP 50%, 패턴 Phase 1만 |
| 15     | 대마법사 + 드래곤 (약화)               | 드래곤 HP 50%, 비행 패턴만    |
| 20     | 용사 + 대마법사 (약화) + 성기사 (약화) | 약화 보스는 HP 40%, 단일 패턴 |

> **약화 HP 계산 기준**: 약화 보스의 HP는 **원본 기본 HP**에 약화 배율을 적용한다. 웨이브 스케일링 배율은 적용하지 않는다.
>
> - 예: 웨이브 10의 약화 성기사 = 기본 HP 500 × 50% = **250 HP** (웨이브 10의 ×1.8 배율 미적용)
> - 예: 웨이브 20의 약화 성기사 = 기본 HP 500 × 40% = **200 HP**
> - 예: 웨이브 20의 약화 대마법사 = 기본 HP 800 × 40% = **320 HP**

- 약화 보스는 원본보다 작은 스프라이트 (80% 크기)
- 약화 보스 처치 시 Corpse 5개 드롭 (정상 보스의 50%)
- 보스 체력바는 **주 보스**만 상단 표시, 약화 보스는 머리 위 표시
- 모든 보스 처치 시 웨이브 클리어 (약화 보스도 필수)
