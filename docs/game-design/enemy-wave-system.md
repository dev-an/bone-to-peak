# 적 & 웨이브 시스템

> [← 기획 총괄로 돌아가기](./overview.md)

---

## 개요

적은 Bone-To-Peak에서 **위협이자 자원**이다. 처치된 적은 [Corpse](./corpse-economy.md)를 드롭하여 [미니언 소환](./minion-system.md)의 연료가 된다. 웨이브 시스템은 시간이 지남에 따라 난이도를 증가시키며, 플레이어가 군단 규모를 키우도록 압박한다.

---

## 적 유형

### 일반 적

| 유형                  | HP  | 공격력 | 이동속도 | 공격범위  | Corpse 드롭 | 특징               |
| --------------------- | --- | ------ | -------- | --------- | ----------- | ------------------ |
| 스웜 (Swarm)          | 15  | 5      | 5.0      | 근접      | 1           | 약하지만 대량 출현 |
| 할버디어 (Halberdier) | 40  | 12     | 3.5      | 근접 (긴) | 1           | 긴 근접 사거리     |
| 궁수 (Archer)         | 25  | 8      | 3.0      | 원거리    | 1           | 후방에서 사격      |
| 방패병 (Shielder)     | 80  | 6      | 2.5      | 근접      | 2           | 전면 피해 50% 감소 |

### 엘리트 적

웨이브 5 이후부터 일반 적과 함께 소수 출현한다.

| 유형              | HP  | 공격력 | 이동속도 | Corpse 드롭 | 특수 능력                        |
| ----------------- | --- | ------ | -------- | ----------- | -------------------------------- |
| 기사 (Knight)     | 150 | 20     | 4.0      | 3           | 돌진 공격 (3초마다, 직선 돌진)   |
| 마법사 (Mage)     | 80  | 30     | 3.0      | 3           | 범위 마법 (2초마다, 반경 2 유닛) |
| 암살자 (Assassin) | 60  | 35     | 6.0      | 3           | 은신 후 네크로맨서 직접 공격     |

### 보스

5웨이브마다 등장하는 강력한 적이다.

| 보스                | 등장 웨이브 | HP   | 페이즈 | Corpse 드롭 |
| ------------------- | ----------- | ---- | ------ | ----------- |
| 성기사 (Paladin)    | 5           | 500  | 2      | 10          |
| 드래곤 (Dragon)     | 10          | 1200 | 3      | 10          |
| 대마법사 (Archmage) | 15          | 800  | 3      | 10          |
| 용사 (Hero)         | 20          | 2000 | 4      | 10          |

---

## 웨이브 구조

### 시간 기반 진행

| 웨이브 | 시작 시간 | 지속 시간 | 특징                           |
| ------ | --------- | --------- | ------------------------------ |
| 1      | 0:00      | 60초      | 스웜만 등장, 튜토리얼          |
| 2      | 1:00      | 60초      | 할버디어 추가                  |
| 3      | 2:00      | 60초      | 궁수 추가                      |
| 4      | 3:00      | 60초      | 방패병 추가, 혼합 구성         |
| 5      | 4:00      | 90초      | **보스 등장** + 엘리트 시작    |
| 6~9    | —         | 60초      | 적 수량 및 스탯 증가           |
| 10     | 9:00      | 120초     | **2번째 보스** + 대규모 웨이브 |
| 11~19  | —         | 60초      | 엘리트 비율 증가               |
| 20     | 19:00     | 180초     | **최종 보스** + 종말 웨이브    |

### 웨이브 간 휴식

- 각 웨이브 종료 후 **10초간 휴식** (적 스폰 없음)
- 휴식 시간 동안 Corpse 수집, 합성, 포메이션 전환 가능
- 보스 웨이브 종료 후 **15초간 휴식**

---

## 스폰 패턴

### 스폰 위치

- 화면 밖 가장자리에서 스폰 (카메라 영역 밖 1~2 유닛)
- 네크로맨서 기준 **전방위 360도**에서 출현
- 보스는 화면 상단에서 등장 (연출)

### 스폰 규칙

```
웨이브 시작
    │
    ▼
스폰 간격 타이머 (웨이브별 상이)
    │
    ▼
스폰 위치 결정 (랜덤 방향, 화면 밖)
    │
    ▼
적 유형 결정 (웨이브 스폰 테이블)
    │
    ├─ 70%: 일반 적 (종류는 웨이브별 테이블)
    ├─ 20%: 일반 적 소규모 무리 (5~8마리)
    └─ 10%: 엘리트 적 (웨이브 5 이후)
```

### 스폰 간격 (초)

| 웨이브 | 스폰 간격 | 웨이브당 총 적 수 (근사) |
| ------ | --------- | ------------------------ |
| 1      | 2.0       | 30                       |
| 5      | 1.5       | 60 + 보스                |
| 10     | 1.0       | 120 + 보스               |
| 15     | 0.7       | 180 + 보스               |
| 20     | 0.5       | 360 + 보스               |

---

## 난이도 곡선

### 스탯 스케일링

웨이브가 진행될수록 적의 기본 스탯에 배율이 적용된다.

| 웨이브 | HP 배율 | 공격력 배율 | 이동속도 배율 |
| ------ | ------- | ----------- | ------------- |
| 1~4    | ×1.0    | ×1.0        | ×1.0          |
| 5~9    | ×1.3    | ×1.2        | ×1.05         |
| 10~14  | ×1.8    | ×1.5        | ×1.1          |
| 15~19  | ×2.5    | ×2.0        | ×1.15         |
| 20     | ×4.0    | ×3.0        | ×1.2          |

### 설계 의도

- 초반(1~4): 시스템 학습 구간, 적은 약하고 소환을 연습
- 중반(5~10): 군단 운영 본격화, 포메이션과 합성이 중요해짐
- 후반(11~19): 대규모 군단 vs 대규모 웨이브, 자원 관리 압박 극대화
- 최종(20): 모든 시스템을 총동원하는 클라이맥스

---

## 보스 메카닉

### 공통 규칙

- 보스는 화면 상단에서 등장하며, 체력바가 화면 상단에 표시
- 보스 등장 중에도 일반 적이 함께 스폰됨
- 보스 처치 시 Corpse 10개 + 특수 보상 드롭
- 보스는 넉백 면역

### 성기사 (Paladin) — 웨이브 5

| 페이즈 | HP 구간  | 패턴                                                                    |
| ------ | -------- | ----------------------------------------------------------------------- |
| 1      | 100~50%  | 직선 돌진 → 대검 휘두르기 (전방 180도)                                  |
| 2      | 50% 이하 | 신성 보호막 발동 (5초간 피해 50% 감소) + 빛기둥 낙하 (3곳, 2초 후 폭발) |

### 드래곤 (Dragon) — 웨이브 10

| 페이즈 | HP 구간  | 패턴                                          |
| ------ | -------- | --------------------------------------------- |
| 1      | 100~70%  | 비행 상태에서 화염 브레스 (직선)              |
| 2      | 70~30%   | 착지 + 꼬리 휘두르기 (360도) + 화염 장판      |
| 3      | 30% 이하 | 연속 비행/착지 전환 + 화염비 (랜덤 위치 다수) |

### 대마법사 (Archmage) — 웨이브 15

| 페이즈 | HP 구간  | 패턴                                               |
| ------ | -------- | -------------------------------------------------- |
| 1      | 100~70%  | 추적형 마법탄 3발 동시 발사                        |
| 2      | 70~30%   | 텔레포트 + 광역 폭발 (텔레포트 도착 지점)          |
| 3      | 30% 이하 | 미니 적 4마리 소환 + 보호막 (미니 적 처치 시 해제) |

### 용사 (Hero) — 웨이브 20 (최종 보스)

| 페이즈 | HP 구간  | 패턴                                          |
| ------ | -------- | --------------------------------------------- |
| 1      | 100~75%  | 검기 발사 (부채꼴) + 돌진                     |
| 2      | 75~50%   | 성스러운 오라 (주변 언데드 약화: 공격력 -30%) |
| 3      | 50~25%   | 동료 소환 (파티원 3명, 각각 독립 AI)          |
| 4      | 25% 이하 | 각성 — 전 패턴 강화 + 속도 증가               |

---

## 적 처치 시 드롭 테이블

| 드롭          | 확률 | 설명                         |
| ------------- | ---- | ---------------------------- |
| Corpse        | 100% | 기본 드롭 (유형별 수량 상이) |
| 경험치 구슬   | 100% | 네크로맨서 레벨업용          |
| 체력 회복     | 5%   | 소량 HP 회복 (15 HP)         |
| Corpse 보너스 | 3%   | 추가 Corpse +2               |
| 임시 버프     | 1%   | 10초간 미니언 공격속도 +20%  |
