# QoL, 접근성 & 설정

> [← 기획 총괄로 돌아가기](./overview.md)

---

## 개요

게임의 핵심 재미 외에, 플레이어가 편안하게 게임을 즐길 수 있도록 하는 편의 기능(QoL), 접근성(Accessibility), 설정(Settings) 시스템을 정의한다.

---

## 메인 메뉴 구조

```
┌────────────────────────────────────┐
│                                    │
│        ☠ BONE-TO-PEAK ☠           │
│           [칭호 표시]              │
│                                    │
│        ▶ 새 게임 시작              │
│          메타 강화 상점            │
│          도감 (Bestiary)           │
│          역대 기록                 │
│          설정                      │
│          종료                      │
│                                    │
│   [Ascension 레벨: 3]   [v1.0.0]  │
│                                    │
└────────────────────────────────────┘
```

---

## 일시정지 메뉴

```
┌─────────────────────────────┐
│                             │
│      ⏸ 일시정지            │
│                             │
│     ▶ 게임 계속            │
│       설정                  │
│       조작법 확인           │
│       미니언 정보           │
│       ──────────            │
│       메인 메뉴로           │
│       (현재 런 포기)        │
│                             │
│   [Wave 7]  [12:34]        │
│                             │
└─────────────────────────────┘
```

| 항목             | 설명                                                   |
| ---------------- | ------------------------------------------------------ |
| 열기             | ESC 키                                                 |
| 게임 상태        | `Time.timeScale = 0` (완전 정지)                       |
| 조작법 확인      | 현재 해금된 시스템의 조작법만 표시                     |
| 미니언 정보      | 현재 소환된 미니언 목록, 스탯, HP 표시                 |
| 메인 메뉴로      | 확인 팝업 2회 ("정말 포기하시겠습니까?" → "네/아니오") |
| 엔드리스 중 이탈 | "엔드리스 종료" 버튼 추가 (현재 기록 저장)             |

---

## 설정 메뉴

### 카테고리 구조

```
설정
├── 게임플레이
│   ├── 포커스 손실 시 자동 일시정지 [ON/OFF]
│   ├── 화면 흔들림 강도 [0~100%]
│   ├── 데미지 숫자 표시 [ON/OFF]
│   ├── 미니언 HP 바 표시 [ON/OFF]
│   ├── 미니맵 표시 [ON/OFF]
│   ├── 인게임 팁 표시 [ON/OFF]
│   └── 튜토리얼 초기화 [버튼]
│
├── 그래픽
│   ├── 해상도 [드롭다운]
│   ├── 창 모드 [전체/창모드/borderless]
│   ├── VSync [ON/OFF]
│   ├── FPS 제한 [30/60/120/무제한]
│   └── 파티클 품질 [낮음/보통/높음]
│
├── 오디오
│   ├── 마스터 볼륨 [0~100]
│   ├── BGM 볼륨 [0~100]
│   ├── SFX 볼륨 [0~100]
│   ├── 앰비언스 볼륨 [0~100]
│   └── UI 볼륨 [0~100]
│
├── 접근성
│   ├── 색맹 모드 [없음/적녹/청황/완전]
│   ├── 고대비 모드 [ON/OFF]
│   ├── 화면 깜빡임 감소 [ON/OFF]
│   ├── HUD 크기 [80%/100%/120%/150%]
│   └── 자막 크기 [보통/크게/매우 크게]
│
└── 컨트롤
    ├── 키 리매핑 [각 액션별]
    ├── 마우스 감도 [0~100]
    └── 컨트롤러 지원 [ON/OFF] (향후)
```

---

## 접근성 (Accessibility)

### 색맹 모드

색맹 유형별로 게임 내 컬러 팔레트를 조정한다.

| 모드 | 변경 대상                               | 대체 색상                             |
| ---- | --------------------------------------- | ------------------------------------- |
| 적녹 | HP 바 (빨강/녹색), 아군/적 구분         | 노랑/파랑 대체, 아군에 형태 마커 추가 |
| 청황 | Corpse (녹색), 경험치 (노랑), 특수 지형 | 패턴 + 밝기 차이로 구분               |
| 완전 | 모든 색상 기반 구분                     | 형태/아이콘/패턴으로 전면 대체        |

### 색맹 모드 구분 방법

색상만으로 정보를 전달하지 않도록 **형태 + 색상** 이중 코딩을 적용한다.

| 구분 대상   | 색상 코딩        | 형태 코딩                  |
| ----------- | ---------------- | -------------------------- |
| 아군 미니언 | 녹색/청록 외곽선 | 원형 발밑 마커             |
| 적          | 붉은/주황 톤     | 삼각형 발밑 마커           |
| Corpse      | 녹색 발광        | 해골 아이콘 (형태로 인식)  |
| 경험치 구슬 | 노란색           | 별 모양                    |
| 위험 장판   | 붉은/보라 발광   | 빗금 패턴 오버레이         |
| HP 바 단계  | 녹→노→빨         | 막대 패턴 (실선→점선→빗금) |

### 고대비 모드

- 배경 밝기 -30% (캐릭터 부각)
- 유닛 외곽선 굵기 +50%
- HUD 배경에 반투명 검정 패널 추가
- 위험 영역 경고 표시 굵기 +100%

### 화면 흔들림 감소

| 설정값 | 효과                                              |
| ------ | ------------------------------------------------- |
| 100%   | 기본 (T3 사망, 보스 패턴, Explode 등 모든 흔들림) |
| 50%    | 강도 50% 감소, 지속 시간 유지                     |
| 0%     | 모든 화면 흔들림 비활성화                         |

### 깜빡임 감소

- Corpse 소멸 전 깜빡임 → 점진적 투명도 감소로 대체
- 피격 시 화면 깜빡임 → 가장자리 붉은 비네트로 대체
- 무적 시간 깜빡임 → 은색 실루엣 표시로 대체

---

## QoL 기능

### 데미지 숫자 표시

| 항목      | 설명                                               |
| --------- | -------------------------------------------------- |
| 기본 설정 | ON                                                 |
| 표시 방식 | 피격 위치 위에 숫자 팝업 (위로 떠오르며 페이드)    |
| 색상      | 아군 피해: 빨간색, 적 피해: 흰색, 크리티컬: 노란색 |
| 누적 표시 | 0.3초 내 같은 대상 연속 피해 → 숫자 합산 표시      |
| 끄기 가능 | 설정에서 토글                                      |

### 자동 저장

| 항목        | 방식                                      |
| ----------- | ----------------------------------------- |
| 메타 데이터 | 강화 구매, 언락 즉시 저장 (`PlayerPrefs`) |
| 런 데이터   | 저장 없음 (런 중 종료 시 데이터 소멸)     |
| 설정        | 변경 즉시 저장                            |
| 도감        | 런 종료 시 일괄 저장                      |

### 키 리매핑

| 항목              | 기본 키 | 리매핑 가능 |
| ----------------- | ------- | ----------- |
| 이동 (상)         | W / ↑   | O           |
| 이동 (하)         | S / ↓   | O           |
| 이동 (좌)         | A / ←   | O           |
| 이동 (우)         | D / →   | O           |
| 기본 공격         | 좌클릭  | O           |
| 소환 (Raise)      | 우클릭  | O           |
| 포메이션 전환     | Q       | O           |
| Explode           | E       | O           |
| Refine            | Space   | O           |
| 군단 정보         | Tab     | O           |
| 일시정지          | ESC     | X (고정)    |
| 레벨업 선택 1/2/3 | 1/2/3   | X (고정)    |

### 키 충돌 방지

- 같은 키를 두 액션에 할당하려 하면 경고 표시
- 기존 키 바인딩 자동 해제 + 확인 팝업
- "기본값 복원" 버튼 제공

---

## 성능 옵션

### 파티클 품질

| 설정값 | 적용                                                  |
| ------ | ----------------------------------------------------- |
| 높음   | 모든 파티클 최대 (사망, 폭발, 오라, 환경 파티클 전부) |
| 보통   | 환경 파티클 50% 감소, 나머지 유지                     |
| 낮음   | 환경 파티클 비활성, 전투 파티클 50% 감소, 오라 단순화 |

### FPS 제한

| 설정값 | 대상 환경       |
| ------ | --------------- |
| 30     | 저사양 PC       |
| 60     | 기본 (권장)     |
| 120    | 고주사율 모니터 |
| 무제한 | 제한 없음       |

---

## 데이터 관리

### 설정 데이터 저장

| 카테고리   | 저장 키 형식                     | 예시                            |
| ---------- | -------------------------------- | ------------------------------- |
| 게임플레이 | `Settings_Gameplay_{Name}`       | `Settings_Gameplay_AutoPause`   |
| 그래픽     | `Settings_Graphics_{Name}`       | `Settings_Graphics_Resolution`  |
| 오디오     | `Settings_Audio_{Channel}Volume` | `Settings_Audio_BGMVolume`      |
| 접근성     | `Settings_Accessibility_{Name}`  | `Settings_Accessibility_CBMode` |
| 컨트롤     | `Settings_Controls_{Action}`     | `Settings_Controls_Attack`      |

### 전체 초기화

- 설정 메뉴 최하단: "모든 설정 초기화" 버튼
- 확인 팝업 1회 → 모든 설정을 기본값으로 복원
- 메타 진행/도감은 영향 없음 (별도 초기화)
